import{g as v}from"../chunks/api.24b2cd97.js";import{v as f}from"../chunks/views.2b268a34.js";import{S as h,i as w,s as $,k as c,q as y,a as x,y as S,l as u,m as d,r as b,h as g,c as P,z as j,n as q,b as z,F as m,A as E,u as O,g as R,d as k,B as A}from"../chunks/index.f9f2799d.js";import{R as B}from"../chunks/ResultsPage.7cf08947.js";async function C({params:s,url:a,fetch:o}){const e=f[s.view],r=a.searchParams.get("page")??"1",i=await v(o,e.endpoint,{page:r});return{view:s.view,title:e.title,endpoint:e.endpoint,movies:i.results,next_page:i.page<i.total_pages?i.page+1:null}}const V=Object.freeze(Object.defineProperty({__proto__:null,load:C},Symbol.toStringTag,{value:"Module"}));function D(s){let a,o,e=s[0].title+"",r,i,t,_;return t=new B({props:{movies:s[0].movies,next:s[0].next_page?`/movies/${s[0].view}?page=${s[0].next_page}`:null}}),t.$on("end",s[2]),{c(){a=c("div"),o=c("h1"),r=y(e),i=x(),S(t.$$.fragment),this.h()},l(n){a=u(n,"DIV",{class:!0});var l=d(a);o=u(l,"H1",{});var p=d(o);r=b(p,e),p.forEach(g),i=P(l),j(t.$$.fragment,l),l.forEach(g),this.h()},h(){q(a,"class","column svelte-910d5d")},m(n,l){z(n,a,l),m(a,o),m(o,r),m(a,i),E(t,a,null),_=!0},p(n,[l]){(!_||l&1)&&e!==(e=n[0].title+"")&&O(r,e);const p={};l&1&&(p.movies=n[0].movies),l&1&&(p.next=n[0].next_page?`/movies/${n[0].view}?page=${n[0].next_page}`:null),t.$set(p)},i(n){_||(R(t.$$.fragment,n),_=!0)},o(n){k(t.$$.fragment,n),_=!1},d(n){n&&g(a),A(t)}}}function F(s,a,o){let{data:e}=a,r;const i=async()=>{if(!e.next_page)return;const t=await v(fetch,e.endpoint,{page:String(e.next_page)});o(0,e.movies=[...e.movies,...t.results],e),o(0,e.next_page=t.page<t.total_pages?t.page+1:null,e)};return s.$$set=t=>{"data"in t&&o(0,e=t.data)},[e,r,i]}class G extends h{constructor(a){super(),w(this,a,F,D,$,{data:0})}}export{G as component,V as universal};
